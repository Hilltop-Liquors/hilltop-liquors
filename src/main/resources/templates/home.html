<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<meta name="cocktailApiKey" th:content="${cocktailApiKey}">
<head th:include="partials/head :: head">

    <title>Hilltop-Home</title>

    <style>
        nav {
            height: 70px !important;
        }

        h1 {
            width: 50%;
            text-align: center;
        }

        #drink-section img {
            width: 50%;
            height: auto;
        }
    </style>

</head>
<body>
<nav th:replace="partials/navbar :: navbar"></nav>
<div th:replace="partials/login-modal :: login-modal"></div>

<div class="container m-5 p-5">
<!--  CHECKOUT SUCCESS PARAM -->
    <div th:if="${param.success}" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Holy guacamole!</strong> Thank you for your order! See you at the top!
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

<!--ERROR LOGIN PARAM-->
    <div th:if="${param.error}" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Holy guacamole!</strong> Incorrect login
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div th:if="${param.emailSuccess}" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Holy guacamole!</strong> Thank you for contacting us, we'll get in touch ASAP!
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>


    <!--  =========== LOGIN MODAL ============  -->
<!--    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"-->
<!--         aria-hidden="true">-->
<!--        <div class="modal-dialog" role="document">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>-->
<!--                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                        <span aria-hidden="true">&times;</span>-->
<!--                    </button>-->
<!--                </div>-->
<!--                <div class="modal-body">-->
<!--                    &lt;!&ndash;  =========== LOGIN FORM ============  &ndash;&gt;-->
<!--                    <div th:if="${loginError}">-->
<!--                        <div class="alert alert-danger"> Invalid username or-->
<!--                            password.-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div th:if="${param.logout}">-->
<!--                        <div class="alert alert-info">You have been logged out.</div>-->
<!--                    </div>-->
<!--                    <br>-->

<!--                    <div class="container m-auto" style="background-color: #f4f4f4;">-->
<!--                        <a class="p-2 mt-3" style="text-decoration: none; color:black;" th:href="@{/Home}">back</a>-->

<!--                        <div class="row">-->
<!--                            <div class="col-md-6 col-md-offset-3">-->
<!--                                <h1>Login page</h1>-->
<!--                                <form th:action="@{/login}" method="post">-->
<!--                                    <div class="form-group">-->
<!--                                        <label for="username">Username</label>: <input type="text"-->
<!--                                                                                       id="username" name="username" class="form-control"-->
<!--                                                                                       autofocus="autofocus" placeholder="Username"/>-->
<!--                                    </div>-->
<!--                                    <div class="form-group">-->
<!--                                        <label for="password">Password</label>: <input type="password"-->
<!--                                                                                       id="password" name="password" class="form-control"-->
<!--                                                                                       placeholder="Password"/>-->
<!--                                    </div>-->
<!--                                    <div class="form-group">-->
<!--                                        <div class="row">-->
<!--                                            <div class="col-sm-6 col-sm-offset-3">-->
<!--                                                <input type="submit" name="login-submit" id="login-submit"-->
<!--                                                       class="form-control btn btn-primary" value="Log In"/>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="form-group">-->
<!--      <span>New user? <a href="/registration">Register-->
<!--        here</a></span>-->
<!--                                    </div>-->
<!--                                </form>-->

<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->









                    <!--  =========== END LOGIN FORM ============  -->
<!--                </div>-->
<!--                <div class="modal-footer">-->
<!--                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
<!--                    <button type="button" class="btn btn-primary">Save changes</button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->




<!--  =========== RECIPES ============  -->
    <section id="drink-section"></section>
    <section id="on-list_item"></section>
    <section id="ons-card"></section>

</div>
<script>
    console.log(document.querySelector('meta[name="cocktailApiKey"]').content);
    fetch("https://the-cocktail-db.p.rapidapi.com/random.php", {
        "method": "GET",
        "headers": {
            "x-rapidapi-host": "the-cocktail-db.p.rapidapi.com",
            "x-rapidapi-key": document.querySelector('meta[name="cocktailApiKey"]').content
        }
    })
        .then(response => response.json())
        .then(
            data =>
                // console.log(data))
                getCocktail(data))

        .catch(err => {
            console.log(err);
        });

    function getCocktail(cocktail) {

        // console.log( cocktail.drinks[0].strDrinkThumb + " " + cocktail.drinks[0].strDrink);
        let drinkSection = document.querySelector('#drink-section');
        let drinkName = document.createElement('h2');
        drinkName.innerHTML = cocktail.drinks[0].strDrink;
        drinkSection.appendChild(drinkName);

        let img = document.createElement('img');
        img.src = cocktail.drinks[0].strDrinkThumb;

        drinkSection.appendChild(img);
        for (let i = 1; i < 16; i++) {
            // console.log(i);
            if (cocktail.drinks[0][`strIngredient${i}`] == null || cocktail.drinks[0][`strIngredient${i}`] == '') {
                break;
            }

            let ingredient = document.createElement('ons-list-item');
            ingredient.innerHTML = cocktail.drinks[0][`strMeasure${i}`] + ': ' + cocktail.drinks[0][`strIngredient${i}`];
            drinkSection.appendChild(ingredient);
        }
        let card = document.createElement('ons-card');
        card.innerHTML = cocktail.drinks[0].strInstructions;

        drinkSection.appendChild(card);
    }
</script>
<!--  =========== END RECIPES ============  -->

<footer th:replace="partials/footer :: footer"></footer>
</body>
</html>
